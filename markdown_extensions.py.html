<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <title>pyccoon v0.1.5 documentation: markdown_extensions.py</title>
  <link rel="stylesheet" href="./pyccoon.css">
  <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']], processEscapes: true}
  });
  </script>
  <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</head>
<body>
<div id='container' >
  <div id="footer">
    <span id="project-name">
        <a class="btn" href="./index.html">pyccoon v0.1.5 documentation</a>
    </span>
    <a class="btn" class="source source-1" href="#top">Back to top</a>
    <div id="jump_to" class="btn">
    Contents
    <div id="jump_wrapper">
      <div id="jump_page">
          <a class="source source-2" href="#todo,-fixme,-warning,-caution-marks"> TODO, FIXME, WARNING, CAUTION marks </a>
          <a class="source source-2" href="#lines-connector-extension"> Lines connector extension </a>
          <a class="source source-2" href="#better-definition-lists"> Better definition lists </a>
          <a class="source source-2" href="#docblocks-meta-marks-processor"> Docblocks meta marks processor </a>
          <a class="source source-2" href="#autolink-extension"> Autolink extension</a>
          <a class="source source-2" href="#math-extension-for-python-markdown"> Math extension for Python-Markdown</a>
      </div>
    </div>
    </div>
    <div class="generation-time">
        Generated at
        <code>2015-06-21 01:35</code>
        by a diligent
        <a target="_blank" href="http://ckald.github.io/pyccoon/" title="Pyccoon: side-to-side documentation generator">
            <img id="pyccoon-icon" src="./pyccoon_icon.svg" alt="Pyccoon: side-to-side documentation generator" />pyccoon</a>
    </div>
  </div>
  <a id="top"></a>
  <div class='section'>
    <div class='docs nav'>
      <nav id="breadcrumbs">/ <a href="markdown_extensions.py.html/../index.html">.</a> / markdown_extensions.py</nav>
      <ul id="children"></ul>
    </div>
  </div>
  <div id="everything" class='clearall'>
    <div id="background"></div>
    <div class='section'>
    <a id="section-0" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-0'>#</a>
          </div>
          
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="kn">import</span> <span class="nn">re</span>

<span class="kn">from</span> <span class="nn">markdown.util</span> <span class="kn">import</span> <span class="n">etree</span><span class="p">,</span> <span class="n">AtomicString</span>
<span class="kn">from</span> <span class="nn">markdown.inlinepatterns</span> <span class="kn">import</span> <span class="n">Pattern</span>
<span class="kn">from</span> <span class="nn">markdown.preprocessors</span> <span class="kn">import</span> <span class="n">Preprocessor</span>
<span class="kn">from</span> <span class="nn">markdown.extensions</span> <span class="kn">import</span> <span class="n">Extension</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-1" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-1'>#</a>
          </div>
          <h2><a id="todo,-fixme,-warning,-caution-marks" class="header-anchor" href="#todo,-fixme,-warning,-caution-marks"> TODO, FIXME, WARNING, CAUTION marks </a></h2>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="k">class</span> <span class="nc">Todo</span><span class="p">(</span><span class="n">Extension</span><span class="p">):</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-2" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-2'>#</a>
          </div>
          <p>Markdown preprocessor that matches all TODO and FIXME strings occurring at the beginning of the line or after the inline comment delimiter and highlights them in the documentation.</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>    <span class="k">class</span> <span class="nc">Prep</span><span class="p">(</span><span class="n">Preprocessor</span><span class="p">):</span>

        <span class="n">matched_strings</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;TODO&quot;</span><span class="p">,</span> <span class="s">&quot;FIXME&quot;</span><span class="p">,</span> <span class="s">&quot;WARNING&quot;</span><span class="p">,</span> <span class="s">&quot;CAUTION&quot;</span><span class="p">]</span>
        <span class="n">regex</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">&quot;^\s*(&quot;</span> <span class="o">+</span> <span class="s">&quot;|&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">matched_strings</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;:?)(.*)&quot;</span><span class="p">,</span> <span class="n">flags</span><span class="o">=</span><span class="n">re</span><span class="o">.</span><span class="n">I</span><span class="p">)</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-3" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-3'>#</a>
          </div>
          <p>Intended markup for TODO strings. The type of the string is used as a class. </p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>        <span class="k">def</span> <span class="nf">template</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">match</span><span class="p">):</span>

            <span class="k">return</span> <span class="s">&quot;&lt;span class={0:s}&gt;&lt;strong&gt;{1:s}&lt;/strong&gt;{2:s}&lt;/span&gt;&quot;</span>\
                <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span> <span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-4" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-4'>#</a>
          </div>
          <p>String matching is case insensitive </p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>        <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lines</span><span class="p">):</span>

            <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">regex</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">template</span><span class="p">,</span> <span class="n">line</span><span class="p">)</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">]</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-5" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-5'>#</a>
          </div>
          
        </div>
        <div class='code'>
          <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">extendMarkdown</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">md</span><span class="p">,</span> <span class="n">md_globals</span><span class="p">):</span>
        <span class="n">md</span><span class="o">.</span><span class="n">preprocessors</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&#39;todo&#39;</span><span class="p">,</span> <span class="n">Todo</span><span class="o">.</span><span class="n">Prep</span><span class="p">(</span><span class="n">md</span><span class="p">),</span> <span class="s">&#39;_end&#39;</span><span class="p">)</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-6" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-6'>#</a>
          </div>
          <h2><a id="lines-connector-extension" class="header-anchor" href="#lines-connector-extension"> Lines connector extension </a></h2>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="k">class</span> <span class="nc">LinesConnector</span><span class="p">(</span><span class="n">Extension</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="s">r&quot;(\S)\s*</span><span class="se">\\</span><span class="s">\s*\n\s*(\S)&quot;</span><span class="p">,</span> <span class="n">sub</span><span class="o">=</span><span class="s">r&quot;\1 \2&quot;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>

        <span class="n">regex</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">regex</span><span class="p">,</span> <span class="n">flags</span><span class="o">=</span><span class="n">re</span><span class="o">.</span><span class="n">M</span><span class="p">)</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-7" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-7'>#</a>
          </div>
          
        </div>
        <div class='code'>
          <div class="highlight"><pre>        <span class="k">class</span> <span class="nc">Prep</span><span class="p">(</span><span class="n">Preprocessor</span><span class="p">):</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-8" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-8'>#</a>
          </div>
          <p>Method ensures that there is exactly one space between 2 joined strings. </p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>            <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lines</span><span class="p">):</span>

                <span class="k">return</span> <span class="n">regex</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="n">sub</span><span class="p">,</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lines</span><span class="p">))</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-9" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-9'>#</a>
          </div>
          
        </div>
        <div class='code'>
          <div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">Prep</span> <span class="o">=</span> <span class="n">Prep</span><span class="p">()</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">LinesConnector</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-10" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-10'>#</a>
          </div>
          
        </div>
        <div class='code'>
          <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">extendMarkdown</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">md</span><span class="p">,</span> <span class="n">md_globals</span><span class="p">):</span>
        <span class="n">md</span><span class="o">.</span><span class="n">preprocessors</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&#39;lines-connector&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Prep</span><span class="p">,</span> <span class="s">&#39;_end&#39;</span><span class="p">)</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-11" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-11'>#</a>
          </div>
          <h2><a id="better-definition-lists" class="header-anchor" href="#better-definition-lists"> Better definition lists </a></h2>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="k">class</span> <span class="nc">SaneDefList</span><span class="p">(</span><span class="n">Extension</span><span class="p">):</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-12" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-12'>#</a>
          </div>
          <p>Markdown preprocessor that prepares natural-style definition lists for native Markdown extension <code>def_list</code>. It allows to write more compact and readable class field definitions.</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>    <span class="k">class</span> <span class="nc">Prep</span><span class="p">(</span><span class="n">Preprocessor</span><span class="p">):</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-13" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-13'>#</a>
          </div>
          <p>Searches for a line starting with a literal followed by a colon and multiple spaces:</p>
<div class="codehilite"><pre>some arbitrary parameter name
:   and its definition separated by `:\s\s+`

`parameter name` might contain everything except a [colon](//en.wikipedia.org/wiki/Colon_(punctuation)) and be multiline
:   it still works
</pre></div>


<p>And turns it into:</p>
<dl>
<dt>some arbitrary parameter name</dt>
<dd>and its definition separated by <code>:\s\s+</code></dd>
<dt><code>parameter name</code> might contain everything except a <a href="//en.wikipedia.org/wiki/Colon_(punctuation)">colon</a> and be multiline</dt>
<dd>it still works</dd>
</dl>
        </div>
        <div class='code'>
          <div class="highlight"><pre>        <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lines</span><span class="p">):</span>

            <span class="n">new_lines</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
                <span class="n">match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&#39;^(\s*)([^:]+):\s{2,}(.+)&#39;</span><span class="p">,</span> <span class="n">line</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">match</span><span class="p">:</span>
                    <span class="n">new_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
                    <span class="n">new_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;:   &#39;</span> <span class="o">+</span> <span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
                    <span class="n">new_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">new_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">new_lines</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-14" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-14'>#</a>
          </div>
          
        </div>
        <div class='code'>
          <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">extendMarkdown</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">md</span><span class="p">,</span> <span class="n">md_globals</span><span class="p">):</span>
        <span class="n">md</span><span class="o">.</span><span class="n">preprocessors</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&#39;sane-def-list&#39;</span><span class="p">,</span> <span class="n">SaneDefList</span><span class="o">.</span><span class="n">Prep</span><span class="p">(</span><span class="n">md</span><span class="p">),</span> <span class="s">&#39;_end&#39;</span><span class="p">)</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-15" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-15'>#</a>
          </div>
          <h2><a id="docblocks-meta-marks-processor" class="header-anchor" href="#docblocks-meta-marks-processor"> Docblocks meta marks processor </a></h2>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="k">class</span> <span class="nc">Pydoc</span><span class="p">(</span><span class="n">Extension</span><span class="p">):</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-16" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-16'>#</a>
          </div>
          <p>Preprocessor used to parse PyDoc-style comments like <code>:param name:</code> and format them. </p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>    <span class="k">class</span> <span class="nc">Prep</span><span class="p">(</span><span class="n">Preprocessor</span><span class="p">):</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-17" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-17'>#</a>
          </div>
          <p><span class="pydoc pydoc-param"><span>param</span> <code>lines</code></span> Documentation lines
<span class="pydoc pydoc-return"><span>return</span></span> Lines of text with parsed PyDoc comments</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>        <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lines</span><span class="p">):</span>

            <span class="n">new_lines</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">text</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-18" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-18'>#</a>
          </div>
          <p>Regex that matches <code>@param name</code></p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>                <span class="n">text</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
                    <span class="s">r&#39;^(\s?)@(\w+)\s+([&quot;</span><span class="se">\&#39;</span><span class="s">\`].+[&quot;</span><span class="se">\&#39;</span><span class="s">\`]|\S+)\s*&#39;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">M</span>
                <span class="p">)</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span>
                    <span class="s">r&#39;\1&lt;span class=&quot;pydoc pydoc-\2&quot;&gt;&lt;span&gt;\2&lt;/span&gt; &lt;code&gt;\3&lt;/code&gt;&lt;/span&gt; &#39;</span><span class="p">,</span>
                    <span class="n">text</span><span class="p">)</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-19" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-19'>#</a>
          </div>
          <p>Regex that matches <code>@var</code></p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>                <span class="n">text</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
                    <span class="s">r&#39;^(\s?)@(\w+)&#39;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">M</span>
                <span class="p">)</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span>
                    <span class="s">r&#39;\1&lt;span class=&quot;pydoc pydoc-\2&quot;&gt;&lt;span&gt;\2&lt;/span&gt;&lt;/span&gt;&#39;</span><span class="p">,</span>
                    <span class="n">text</span><span class="p">)</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-20" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-20'>#</a>
          </div>
          <p>Regex that matches <code>:param name:</code></p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>                <span class="n">text</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
                    <span class="s">r&#39;^(\s?):([^: ]+) +([^:]+):&#39;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">M</span>
                <span class="p">)</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span>
                    <span class="s">r&#39;\1&lt;span class=&quot;pydoc pydoc-\2&quot;&gt;&lt;span&gt;\2&lt;/span&gt; &lt;code&gt;\3&lt;/code&gt;&lt;/span&gt;&#39;</span><span class="p">,</span>
                    <span class="n">text</span><span class="p">)</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-21" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-21'>#</a>
          </div>
          <p>Regex that matches single-word comments: <code>:return:</code></p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>                <span class="n">text</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
                    <span class="s">r&#39;^(\s?):([^: ]+):&#39;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">M</span>
                <span class="p">)</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span>
                    <span class="s">r&#39;\1&lt;span class=&quot;pydoc pydoc-\2&quot;&gt;&lt;span&gt;\2&lt;/span&gt;&lt;/span&gt;&#39;</span><span class="p">,</span>
                    <span class="n">text</span><span class="p">)</span>

                <span class="n">new_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">text</span><span class="p">)</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-22" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-22'>#</a>
          </div>
          
        </div>
        <div class='code'>
          <div class="highlight"><pre>            <span class="k">return</span> <span class="n">new_lines</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-23" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-23'>#</a>
          </div>
          
        </div>
        <div class='code'>
          <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">extendMarkdown</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">md</span><span class="p">,</span> <span class="n">md_globals</span><span class="p">):</span>
        <span class="n">md</span><span class="o">.</span><span class="n">preprocessors</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&#39;pydoc&#39;</span><span class="p">,</span> <span class="n">Pydoc</span><span class="o">.</span><span class="n">Prep</span><span class="p">(</span><span class="n">md</span><span class="p">),</span> <span class="s">&#39;_end&#39;</span><span class="p">)</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-24" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-24'>#</a>
          </div>
          <h2><a id="autolink-extension" class="header-anchor" href="#autolink-extension"> Autolink extension</a></h2>
<p>There's already an inline pattern called autolink which handles <a href="http://www.google.com">http://www.google.com</a> type links. </p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="k">class</span> <span class="nc">AutoLinkExtension</span><span class="p">(</span><span class="n">Extension</span><span class="p">):</span>

    <span class="n">EXTRA_AUTOLINK_RE</span> <span class="o">=</span> <span class="s">r&#39;(?&lt;!&quot;|&gt;)((https?://|www)[-\w./#?%=&amp;]+)&#39;</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-25" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-25'>#</a>
          </div>
          
        </div>
        <div class='code'>
          <div class="highlight"><pre>    <span class="k">class</span> <span class="nc">pattern</span><span class="p">(</span><span class="n">Pattern</span><span class="p">):</span>

        <span class="k">def</span> <span class="nf">handleMatch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">m</span><span class="p">):</span>
            <span class="n">el</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">Element</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;http&#39;</span><span class="p">):</span>
                <span class="n">href</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">href</span> <span class="o">=</span> <span class="s">&#39;http://</span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
            <span class="n">el</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s">&#39;href&#39;</span><span class="p">,</span> <span class="n">href</span><span class="p">)</span>
            <span class="n">el</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">el</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-26" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-26'>#</a>
          </div>
          
        </div>
        <div class='code'>
          <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">extendMarkdown</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">md</span><span class="p">,</span> <span class="n">md_globals</span><span class="p">):</span>
        <span class="n">md</span><span class="o">.</span><span class="n">inlinePatterns</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
            <span class="s">&#39;extra_autolink&#39;</span><span class="p">,</span>
            <span class="n">AutoLinkExtension</span><span class="o">.</span><span class="n">pattern</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">EXTRA_AUTOLINK_RE</span><span class="p">,</span> <span class="bp">self</span><span class="p">),</span>
            <span class="s">&#39;&gt;autolink&#39;</span>
        <span class="p">)</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-27" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-27'>#</a>
          </div>
          <h2><a id="math-extension-for-python-markdown" class="header-anchor" href="#math-extension-for-python-markdown"> Math extension for Python-Markdown</a></h2>
<p>Adds support for displaying math formulas using <a href="http://www.mathjax.org/">MathJax</a>.</p>
<p>Author: 2015, Dmitry Shachnev <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#109;&#105;&#116;&#121;&#97;&#53;&#55;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;">&#109;&#105;&#116;&#121;&#97;&#53;&#55;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;</a>.
Slightly customized by cryptonomicon314</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="k">class</span> <span class="nc">MathExtension</span><span class="p">(</span><span class="n">Extension</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">MathExtension</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-28" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-28'>#</a>
          </div>
          
        </div>
        <div class='code'>
          <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">extendMarkdown</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">md</span><span class="p">,</span> <span class="n">md_globals</span><span class="p">):</span>

        <span class="k">def</span> <span class="nf">handle_match_inline</span><span class="p">(</span><span class="n">m</span><span class="p">):</span>
            <span class="n">node</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">Element</span><span class="p">(</span><span class="s">&#39;script&#39;</span><span class="p">)</span>
            <span class="n">node</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s">&#39;type&#39;</span><span class="p">,</span> <span class="s">&#39;math/tex&#39;</span><span class="p">)</span>
            <span class="n">node</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">AtomicString</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">node</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-29" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-29'>#</a>
          </div>
          
        </div>
        <div class='code'>
          <div class="highlight"><pre>        <span class="k">def</span> <span class="nf">handle_match</span><span class="p">(</span><span class="n">m</span><span class="p">):</span>
            <span class="n">node</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">Element</span><span class="p">(</span><span class="s">&#39;script&#39;</span><span class="p">)</span>
            <span class="n">node</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s">&#39;type&#39;</span><span class="p">,</span> <span class="s">&#39;math/tex; mode=display&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="s">&#39;</span><span class="se">\\</span><span class="s">begin&#39;</span> <span class="ow">in</span> <span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">2</span><span class="p">):</span>
                <span class="n">node</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">AtomicString</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="o">+</span> <span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">node</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">AtomicString</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">node</span>

        <span class="n">inlinemathpatterns</span> <span class="o">=</span> <span class="p">(</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-30" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-30'>#</a>
          </div>
          <p>Inline math with <code>$...$</code></p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>            <span class="n">Pattern</span><span class="p">(</span><span class="s">r&#39;(?&lt;!</span><span class="se">\\</span><span class="s">|\$)(\$)([^\$]+)(\$)&#39;</span><span class="p">),</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-31" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-31'>#</a>
          </div>
          <p>Inline math with <code>\(...\)</code></p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>            <span class="n">Pattern</span><span class="p">(</span><span class="s">r&#39;(?&lt;!</span><span class="se">\\</span><span class="s">)(</span><span class="se">\\</span><span class="s">\()(.+?)(</span><span class="se">\\</span><span class="s">\))&#39;</span><span class="p">)</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-32" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-32'>#</a>
          </div>
          
        </div>
        <div class='code'>
          <div class="highlight"><pre>        <span class="p">)</span>
        <span class="n">mathpatterns</span> <span class="o">=</span> <span class="p">(</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-33" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-33'>#</a>
          </div>
          <p>Display style math with <code>$$...$$</code></p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>            <span class="n">Pattern</span><span class="p">(</span><span class="s">r&#39;(?&lt;!</span><span class="se">\\</span><span class="s">)(\$\$)([^\$]+)(\$\$)&#39;</span><span class="p">),</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-34" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-34'>#</a>
          </div>
          <p>Display style math with <code>\[...\]</code></p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>            <span class="n">Pattern</span><span class="p">(</span><span class="s">r&#39;(?&lt;!</span><span class="se">\\</span><span class="s">)(</span><span class="se">\\</span><span class="s">\[)(.+?)(</span><span class="se">\\</span><span class="s">\])&#39;</span><span class="p">),</span>
            <span class="n">Pattern</span><span class="p">(</span><span class="s">r&#39;(?&lt;!</span><span class="se">\\</span><span class="s">)(</span><span class="se">\\</span><span class="s">begin{([a-z]+?\*?)})(.+?)(</span><span class="se">\\</span><span class="s">end{\3})&#39;</span><span class="p">)</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-35" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-35'>#</a>
          </div>
          
        </div>
        <div class='code'>
          <div class="highlight"><pre>        <span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">pattern</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">inlinemathpatterns</span><span class="p">):</span>
            <span class="n">pattern</span><span class="o">.</span><span class="n">handleMatch</span> <span class="o">=</span> <span class="n">handle_match_inline</span>
            <span class="n">md</span><span class="o">.</span><span class="n">inlinePatterns</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&#39;math-inline-</span><span class="si">%d</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">i</span><span class="p">,</span> <span class="n">pattern</span><span class="p">,</span> <span class="s">&#39;&lt;escape&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">pattern</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">mathpatterns</span><span class="p">):</span>
            <span class="n">pattern</span><span class="o">.</span><span class="n">handleMatch</span> <span class="o">=</span> <span class="n">handle_match</span>
            <span class="n">md</span><span class="o">.</span><span class="n">inlinePatterns</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&#39;math-</span><span class="si">%d</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">i</span><span class="p">,</span> <span class="n">pattern</span><span class="p">,</span> <span class="s">&#39;&lt;escape&#39;</span><span class="p">)</span>

</pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
  </div>
</body>
